var alLightbox=function(){"use strict";var t=document.documentElement,e={class:{image:"al-lightbox-image",overlay:"al-lightbox-overlay",overlayImage:"al-lightbox-overlay-image",center:"al-lightbox-center",hidden:"al-lightbox-hidden",visible:"al-lightbox-visible",transition:"al-lightbox-transition",overflow:"al-lightbox-overflow",close:"al-lightbox-close"},dataAttr:{initialized:"data-al-lightbox-initialized",height:"data-al-height",width:"data-al-width"},overlayMargin:30,transitionApplyTimeout:50,checkSizeInterval:500},i=function(t){t.addEventListener("transitionend",function(){t.classList.remove(e.class.transition)},!1)},a=function(t){var e,i=t="string"==typeof t?document.querySelectorAll("."+t):[t];for(e=0;e<i.length;e+=1)i[e].outerHTML=""},n=function(t){var i,n=t="string"==typeof t?document.querySelectorAll("."+t):[t];for(i=0;i<n.length;i+=1)!function(t){var i=0;t.classList.add(e.class.transition),setTimeout(function(){t.classList.add(e.class.hidden),t.classList.remove(e.class.visible)},e.transitionApplyTimeout),t.addEventListener("transitionend",function(){0===i&&(a(t),i+=1)},!1)}(n[i])},s=function(t,a,n){i(t),a?(t.classList.add(e.class.transition),setTimeout(function(){t.classList.remove(e.class.hidden),t.classList.add(e.class.visible),n()},e.transitionApplyTimeout)):(t.classList.remove(e.class.hidden),t.classList.add(e.class.visible),n())},l=function(){n(e.class.overlay),n(e.class.overlayImage),t.classList.remove(e.class.overflow)},o=function(t){var i;(i=document.createElement("button")).setAttribute("type","button"),i.classList.add(e.class.close),t.appendChild(i),i.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),l()},!1)},r=function(i,a){t.classList.add(e.class.overflow),s(i,!0,function(){i.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),l()},!1)}),o(a)},c=function(t){a(e.class.overlay);var i;(i=document.createElement("div")).classList.add(e.class.overlay),i.classList.add(e.class.hidden),document.body.appendChild(i),r(i,t)},d=function(t,i){setTimeout(function(){t.classList.add(e.class.transition),setTimeout(function(){t.style.height=i.height+"px",t.style.width=i.width+"px",c(t)},e.transitionApplyTimeout)},e.transitionApplyTimeout)},u=function(i,a){var n=!0;i.classList.add(e.class.transition),setTimeout(function(){i.style.top=t.scrollTop+window.innerHeight/2+"px",i.style.left="",i.classList.add(e.class.center)},e.transitionApplyTimeout),i.addEventListener("transitionend",function(){n&&(n=!1,d(i,a))},!1)},h=function(t,e){var i=new Image;i.onload=function(){e({width:i.width,height:i.height})},i.onerror=function(){e(!1)},i.src=t},g=function(t){var i=t.width,a=t.height,n=a/i,s=i/a,l=window.innerHeight-2*e.overlayMargin,o=window.innerWidth-2*e.overlayMargin;return i>o&&(a=(i=o)*n),a>l&&(i=(a=l)*s),{width:i,height:a}},v=function(t,i){s(i,!1,function(){function a(){t.hasAttribute(e.dataAttr.height)&&t.hasAttribute(e.dataAttr.width)&&(s.height=t.getAttribute(e.dataAttr.height),s.width=t.getAttribute(e.dataAttr.width),s=g(s),u(i,s),clearInterval(n))}var n,s={};n=setInterval(function(){a()},e.checkSizeInterval),a()})},f=function(t,i){a(e.class.overlayImage);var n,s=t.getAttribute("data-image");(n=document.createElement("div")).style.backgroundImage="url("+s+")",n.style.height=i.height+"px",n.style.width=i.width+"px",n.style.top=i.top+"px",n.style.left=i.left+"px",n.classList.add(e.class.overlayImage,e.class.hidden),document.body.appendChild(n),v(t,n)},m=function(e){var i={height:e.clientHeight,width:e.clientWidth,top:e.getBoundingClientRect().top-t.getBoundingClientRect().top,left:e.getBoundingClientRect().left-t.getBoundingClientRect().left};f(e,i)},p=function(t){t.stopPropagation(),t.preventDefault(),m(this)},A=function(t){t.addEventListener("click",p)},b=function(t){var i=t.getAttribute("data-image");h(i,function(a){t.style.backgroundImage="url("+i+")",t.classList.add(e.class.image),a?(t.setAttribute(e.dataAttr.height,a.height),t.setAttribute(e.dataAttr.width,a.width)):(t.setAttribute(e.dataAttr.height,t.clientHeight+""),t.setAttribute(e.dataAttr.width,t.clientWidth+""))})};return{destroy:function(i){if(i){a(e.class.overlayImage),a(e.class.overlay),t.classList.remove(e.class.overflow);var n,s=document.querySelectorAll(i);for(n=0;n<s.length;n+=1)s[n].hasAttribute(e.dataAttr.initialized)&&(s[n].removeAttribute(e.dataAttr.initialized),s[n].removeAttribute(e.dataAttr.height),s[n].removeAttribute(e.dataAttr.width),s[n].classList.remove(e.class.image),s[n].style.backgroundImage="",s[n].removeEventListener("click",p))}else console.error("AL-Lightbox: A selector must be defined as parameter when calling destroy()")},init:function(t){if(t){var i,a=document.querySelectorAll(t);for(i=0;i<a.length;i+=1)a[i].hasAttribute(e.dataAttr.initialized)||(b(a[i]),A(a[i]),a[i].setAttribute(e.dataAttr.initialized,""))}else console.error("AL-Lightbox: A selector must be defined as parameter when calling init()")}}}();